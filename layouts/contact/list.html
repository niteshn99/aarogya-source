{{ define "main" }}
<main class="container">
<section class="pt-5 pb-5" data-aos="fade-up"></section>
<section class="pt-5 pb-5" data-aos="fade-up">
  <div class="col-xs-12 col-sm-12 col-md-12">
    <div class="row">
      <div class="col-lg-12">
        <div class="t">
           <h3 class="h5 mb-4 font-weight-bold pt-3">{{ .Title }}</h3>
           {{ .Content }}
          
            <form id="contact-form" name="contact-form">
              <div class="row form-group">
                  <div class="col-sm-12 col-md-4 col-lg-4 mt-2 mb-2">
                      <input name="Name" type="text" class="form-control" placeholder="Name">
                  </div>
                  <div class="col-sm-12 col-md-4 col-lg-4 mt-2 mb-2">
                      <input name="Email" type="text" class="form-control" placeholder="Email">
                  </div>
                  <div class="col-sm-12 col-md-4 col-lg-4 mt-2 mb-2">
                      <input name="Phone" type="text" class="form-control" placeholder="Phone number">
                  </div>
              </div>
              <div class="form-group">
                  <textarea name="Message" class="form-control" id="Message" rows="6" placeholder="Message"></textarea>
              </div>
              <button type="submit" id="submit-form" class="btn btn-success btn-round">Submit</button>
            </form>
        </div>
      </div>
    </div>
  </div>
</section>

</main>
<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    /*$('#submit-form').on('click', function(e) {
      e.preventDefault();
      let progress = $.alert({
        title: 'Processing',
        content: 'Hold on, sending your message to server.',
        theme: 'supervan',
        backgroundDismiss: true,
      });
      let $form = $('form#contact-form');
      var jqxhr = $.ajax({
        url: CONTACT_FORM_URL,
        method: "GET",
        dataType: "json",
        data: $form.serializeObject()
      }).done((response) => {
        progress.close();
        if (response.result == "success") {
          $.alert({
            title: 'Get In Touch',
            content: 'Thank you for writing. We will get back to you as soon as possible.',
            autoClose: 'ok|2000',
            backgroundDismiss: true,
            theme: 'supervan',
          });  
        } else {
          $.alert({
            title: 'Get In Touch',
            content: 'Failed to send message. Please try after sometime.',
            autoClose: 'ok|2000',
            backgroundDismiss: true,
            theme: 'supervan',
          });
        }
        $form.trigger("reset");
      });
    });*/

    $("form[name='contact-form']").validate({
        rules: {
          "Name": "required",
          "Email": {
            required: true,
            email: true
          },
          "Phone": {
            required: true,
            number: true,
            minlength: 10,
            maxlength: 10
          },
          "Message": "required"
        },
        messages: {
          "Name": "Please provide your full name.",
          "Email": "Please provide valid email id.",
          "Phone": "Please provide valid 10 digit phone number.",
          "Message": "Please write your message."
        },
        submitHandler: function(form) {
          let progress = $.alert({
            title: 'Processing',
            content: 'Hold on, sending your message to server.',
            theme: 'supervan',
            backgroundDismiss: true,
          });
          let $form = $('form#contact-form');
          var jqxhr = $.ajax({
            url: CONTACT_FORM_URL,
            method: "GET",
            dataType: "json",
            data: $form.serializeObject()
          }).done((response) => {
            progress.close();
            if (response.result == "success") {
              $.alert({
                title: 'Get In Touch',
                content: 'Thank you for writing. We will get back to you as soon as possible.',
                autoClose: 'ok|2000',
                backgroundDismiss: true,
                theme: 'supervan',
              });  
            } else {
              $.alert({
                title: 'Get In Touch',
                content: 'Failed to send message. Please try after sometime.',
                autoClose: 'ok|2000',
                backgroundDismiss: true,
                theme: 'supervan',
              });
            }
            $form.trigger("reset");
          });
        }
      }); 

  });
</script>
{{ end }}

